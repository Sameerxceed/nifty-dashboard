<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><meta http-equiv="refresh" content="3600"><title>Nifty Live Dashboard - Thursday, 26 February 2026</title><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet"><style>
:root{--bg:#070b12;--bg2:#0b1018;--card:#0d1422;--border:#182236;--border2:#1e2e4a;
  --accent:#00d4ff;--green:#00f088;--red:#ff3355;--yellow:#ffcc00;--text:#d8eeff;--muted:#2a3d58;}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'JetBrains Mono',monospace;background:var(--bg);color:var(--text);min-height:100vh;
  background-image:radial-gradient(ellipse 80% 40% at 50% -10%,rgba(0,150,255,0.07),transparent),
  radial-gradient(ellipse 60% 30% at 80% 100%,rgba(0,200,100,0.04),transparent)}
.hdr{background:var(--bg2);border-bottom:1px solid var(--border);padding:14px 20px;
  display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px;
  position:sticky;top:0;z-index:100;backdrop-filter:blur(10px)}
.logo{width:38px;height:38px;background:linear-gradient(135deg,var(--accent),#0044ff);
  border-radius:9px;display:flex;align-items:center;justify-content:center;font-weight:700;
  font-size:13px;color:#000;box-shadow:0 0 16px rgba(0,212,255,0.3)}
.main{max-width:1100px;margin:0 auto;padding:16px 16px 40px}
.g4{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
.g2{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
.g3{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px 16px}
.sec{font-size:10px;font-weight:700;color:var(--muted);font-family:monospace;
  text-transform:uppercase;letter-spacing:1.5px;display:flex;align-items:center;
  gap:8px;margin:20px 0 10px}
.sec::after{content:'';flex:1;height:1px;background:var(--border)}
table{width:100%;border-collapse:collapse}
.hero{padding:20px;background:var(--bg2);border-bottom:1px solid var(--border)}
@media(max-width:800px){.g4{grid-template-columns:repeat(2,1fr)}.g3{grid-template-columns:1fr 1fr}}
@media(max-width:500px){.g2,.g3,.g4{grid-template-columns:1fr}}
</style></head><body><div class="hdr"><div style="display:flex;align-items:center;gap:12px"><div class="logo">NB</div><div><div style="font-size:15px;font-weight:700">Nifty Live Dashboard</div><div style="font-size:9px;color:#2a3d58;margin-top:1px">9-Factor AI - NSE - Gemini + Google Search</div></div></div><div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap"><span style="background:rgba(0,212,255,0.08);border:1px solid rgba(0,212,255,0.2);color:#00d4ff;font-size:10px;font-weight:700;padding:4px 10px;border-radius:20px">Market Open 9:15 AM</span><span style="font-size:10px;color:#7a9cbf;background:#0d1422;padding:4px 10px;border-radius:6px;border:1px solid #182236"><span id="live-stamp">Updated 09:57 IST</span> - 26 Feb 2026</span><span id="live-badge" style="display:none;font-size:10px;font-weight:700;color:#00f088;background:rgba(0,240,136,0.08);border:1px solid rgba(0,240,136,0.3);padding:4px 10px;border-radius:6px">● LIVE</span></div></div><div id="stale-banner" style="display:none;background:#1a0a00;border-left:4px solid #ff8c00;padding:10px 20px;font-size:12px;color:#ff8c00;line-height:1.5"></div><span id="gen-time" data-ts="1772080049" style="display:none"></span><div class="hero"><div style="max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:16px"><div><div style="font-size:10px;color:#2a3d58;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;margin-bottom:8px">Nifty 50 - Live</div><div id="live-price" style="font-size:52px;font-weight:700;line-height:1;letter-spacing:-2px;color:#00f088">N/A</div><div id="live-chg" style="font-size:18px;font-weight:700;margin-top:4px;color:#00f088">+0 (+0%)</div><div style="display:flex;gap:16px;margin-top:8px"><span style="font-size:11px;color:#7a9cbf">H: <strong id="live-high" style="color:#d8eeff">N/A</strong></span><span style="font-size:11px;color:#7a9cbf">L: <strong id="live-low" style="color:#d8eeff">N/A</strong></span><span style="font-size:11px;color:#7a9cbf">VIX: <strong style="color:#ffcc00">N/A</strong></span></div></div><div style="text-align:right"><div style="font-size:10px;color:#2a3d58;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-bottom:6px">Sentiment</div><div style="font-size:48px;font-weight:700;line-height:1;color:#ffcc00">50</div><div style="font-size:12px;color:#7a9cbf;margin-top:2px">—</div><div style="width:140px;margin:8px 0 0 auto"><div style="background:rgba(255,255,255,0.05);border-radius:3px;height:6px;overflow:hidden"><div style="height:6px;width:50%;background:linear-gradient(90deg,#ff3355,#ffcc00,#00f088);border-radius:3px"></div></div><div style="display:flex;justify-content:space-between;font-size:8px;color:#2a3d58;margin-top:3px"><span>BEAR</span><span>NEUTRAL</span><span>BULL</span></div></div></div></div></div><div style="background:#070d17;border-bottom:1px solid #0d1422;padding:8px 20px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:8px;overflow:hidden"><div id="live-ticker" style="font-size:11px;color:#4a6a8a;overflow:hidden;white-space:nowrap"><span style="color:#4a6a8a">Fetching live data...</span></div><div id="next-session" style="font-size:10px;color:#4a6a8a;white-space:nowrap;background:#0d1422;padding:4px 10px;border-radius:6px;border:1px solid #182236">Calculating...</div></div><div class="main"><div style="font-size:10px;font-weight:700;color:#2a3d58;font-family:monospace;text-transform:uppercase;letter-spacing:1.5px;display:flex;align-items:center;gap:8px;margin:20px 0 10px">Intraday Update<span style="flex:1;height:1px;background:#182236;display:block"></span></div><div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:12px"><div style="background:#0d1422;border:1px solid #182236;border-radius:12px;padding:16px 20px"><div style="font-size:10px;font-weight:700;color:#00d4ff;text-transform:uppercase;letter-spacing:1px;margin-bottom:10px">Market Open 9:15 AM</div><p style='margin:0;line-height:1.8;color:#8aadc8;font-size:13px'></p></div><div><div style="background:rgba(0,212,255,0.05);border:1px solid rgba(0,212,255,0.15);border-radius:12px;padding:14px 16px;margin-bottom:10px"><div style="font-size:10px;font-weight:700;color:#00d4ff;text-transform:uppercase;letter-spacing:1px;margin-bottom:10px">Prediction Accuracy</div><div style="display:flex;justify-content:space-between;font-size:11px;color:#7a9cbf;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.04)">Morning Bias<strong style="color:#ffcc00">N/A</strong></div><div style="display:flex;justify-content:space-between;font-size:11px;color:#7a9cbf;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.04)">Open Price<strong style="color:#d8eeff">N/A</strong></div><div style="display:flex;justify-content:space-between;font-size:11px;color:#7a9cbf;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.04)">Current<strong style="color:#d8eeff">N/A</strong></div><div style="display:flex;justify-content:space-between;font-size:11px;color:#7a9cbf;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.04)">Move<strong style="color:#ff3355">N/A pts</strong></div><div style="text-align:center;font-size:15px;font-weight:700;margin-top:10px;padding:8px;background:rgba(255,255,255,0.03);border-radius:8px;color:#ffcc00">Tracking</div></div></div></div><div class="sec">Pre-Market Pulse</div><div class="g4"><div style="background:#0d1422;border:1px solid #182236;border-radius:12px;padding:14px 16px"><div style="font-size:9px;color:#2a3d58;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;margin-bottom:8px">Gift Gift Nifty</div><div style="font-size:22px;font-weight:700;font-family:monospace;color:#d8eeff;line-height:1;margin-bottom:4px">—</div><div style="font-size:10px;color:#7a9cbf;margin-bottom:6px">— (—) Gap: —pts</div><span style="display:inline-block;font-size:9px;font-weight:700;padding:2px 8px;border-radius:20px;border:1px solid #ffcc0044;background:#ffcc0018;color:#ffcc00">FLAT</span></div><div style="background:#0d1422;border:1px solid #182236;border-radius:12px;padding:14px 16px"><div style="font-size:9px;color:#2a3d58;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;margin-bottom:8px">FX USD/INR</div><div style="font-size:22px;font-weight:700;font-family:monospace;color:#d8eeff;line-height:1;margin-bottom:4px">Rs.—</div><div style="font-size:10px;color:#7a9cbf;margin-bottom:6px">Change: —</div><span style="display:inline-block;font-size:9px;font-weight:700;padding:2px 8px;border-radius:20px;border:1px solid #ffcc0044;background:#ffcc0018;color:#ffcc00">STABLE</span></div><div style="background:#0d1422;border:1px solid #182236;border-radius:12px;padding:14px 16px"><div style="font-size:9px;color:#2a3d58;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;margin-bottom:8px">Oil Crude WTI</div><div style="font-size:22px;font-weight:700;font-family:monospace;color:#d8eeff;line-height:1;margin-bottom:4px">$—</div><div style="font-size:10px;color:#7a9cbf;margin-bottom:6px">— (—)</div><span style="display:inline-block;font-size:9px;font-weight:700;padding:2px 8px;border-radius:20px;border:1px solid #ffcc0044;background:#ffcc0018;color:#ffcc00">NEUTRAL</span></div><div style="background:#0d1422;border:1px solid #182236;border-radius:12px;padding:14px 16px"><div style="font-size:9px;color:#2a3d58;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;margin-bottom:8px">VIX India VIX</div><div style="font-size:22px;font-weight:700;font-family:monospace;color:#d8eeff;line-height:1;margin-bottom:4px">N/A</div><div style="font-size:10px;color:#7a9cbf;margin-bottom:6px">Change: 0</div><span style="display:inline-block;font-size:9px;font-weight:700;padding:2px 8px;border-radius:20px;border:1px solid #ffcc0044;background:#ffcc0018;color:#ffcc00">MODERATE</span></div></div><div class="sec">Global Markets &amp; Institutional Flows</div><div class="g2"><div class="card"><div style="font-size:9px;color:#2a3d58;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;margin-bottom:10px">Global Markets (Overnight)</div><table><tr><td colspan="3" style="text-align:center;color:#2a3d58;padding:12px;font-size:12px">No data</td></tr></table></div><div class="card"><div style="font-size:9px;color:#2a3d58;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;margin-bottom:10px">FII + DII Combined Flow</div><div style="display:flex;align-items:center;justify-content:space-between;padding:8px 0;border-bottom:1px solid #182236;font-size:11px"><span style="color:#00d4ff;font-weight:700">FII</span><span>Buy <strong style="color:#00f088">Rs.—Cr</strong></span><span>Sell <strong style="color:#ff3355">Rs.—Cr</strong></span><strong style="color:#ff3355">Net Rs.—Cr</strong></div><div style="display:flex;align-items:center;justify-content:space-between;padding:8px 0;border-bottom:1px solid #182236;font-size:11px"><span style="color:#ffcc00;font-weight:700">DII</span><span>Buy <strong style="color:#00f088">Rs.—Cr</strong></span><span>Sell <strong style="color:#ff3355">Rs.—Cr</strong></span><strong style="color:#ff3355">Net Rs.—Cr</strong></div><div style="margin-top:10px;font-size:11px;color:#7a9cbf">Signal: <strong style="color:#ffcc00">MIXED</strong></div></div></div><div class="sec">Nifty Pivot Levels - H:— L:— C:—</div><div class="card"><div style="display:grid;grid-template-columns:repeat(7,1fr);gap:5px"><div style="text-align:center;background:rgba(255,51,85,0.07);border:1px solid rgba(255,51,85,0.25);border-radius:8px;padding:8px 2px"><div style="font-size:8px;font-weight:700;color:#ff3355;margin-bottom:3px">R3</div><div style="font-size:12px;font-weight:700;font-family:monospace;color:#ff3355">—</div></div><div style="text-align:center;background:rgba(255,51,85,0.07);border:1px solid rgba(255,51,85,0.25);border-radius:8px;padding:8px 2px"><div style="font-size:8px;font-weight:700;color:#ff3355;margin-bottom:3px">R2</div><div style="font-size:12px;font-weight:700;font-family:monospace;color:#ff3355">—</div></div><div style="text-align:center;background:rgba(255,51,85,0.07);border:1px solid rgba(255,51,85,0.25);border-radius:8px;padding:8px 2px"><div style="font-size:8px;font-weight:700;color:#ff3355;margin-bottom:3px">R1</div><div style="font-size:12px;font-weight:700;font-family:monospace;color:#ff3355">—</div></div><div style="text-align:center;background:rgba(0,212,255,0.07);border:1px solid rgba(0,212,255,0.3);border-radius:8px;padding:8px 2px"><div style="font-size:8px;font-weight:700;color:#00d4ff;margin-bottom:3px">PP</div><div style="font-size:12px;font-weight:700;font-family:monospace;color:#00d4ff">—</div></div><div style="text-align:center;background:rgba(0,240,136,0.07);border:1px solid rgba(0,240,136,0.25);border-radius:8px;padding:8px 2px"><div style="font-size:8px;font-weight:700;color:#00f088;margin-bottom:3px">S1</div><div style="font-size:12px;font-weight:700;font-family:monospace;color:#00f088">—</div></div><div style="text-align:center;background:rgba(0,240,136,0.07);border:1px solid rgba(0,240,136,0.25);border-radius:8px;padding:8px 2px"><div style="font-size:8px;font-weight:700;color:#00f088;margin-bottom:3px">S2</div><div style="font-size:12px;font-weight:700;font-family:monospace;color:#00f088">—</div></div><div style="text-align:center;background:rgba(0,240,136,0.07);border:1px solid rgba(0,240,136,0.25);border-radius:8px;padding:8px 2px"><div style="font-size:8px;font-weight:700;color:#00f088;margin-bottom:3px">S3</div><div style="font-size:12px;font-weight:700;font-family:monospace;color:#00f088">—</div></div></div><div style="margin-top:10px;font-size:10px;color:#7a9cbf">Above — = Bullish - Below = Bearish - Current: <strong style="color:#00f088">N/A</strong></div></div><div class="sec">Options Data &amp; Breaking News</div><div class="g2"><div class="card"><div style="font-size:9px;color:#2a3d58;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;margin-bottom:10px">OI &amp; Max Pain</div><div class="g3"><div style="text-align:center;background:rgba(179,136,255,0.08);border:1px solid rgba(179,136,255,0.2);border-radius:10px;padding:12px"><div style="font-size:9px;color:#b388ff;font-weight:700;margin-bottom:4px">MAX PAIN</div><div style="font-size:22px;font-weight:700;font-family:monospace;color:#b388ff">—</div><div style="font-size:10px;color:#7a9cbf;margin-top:4px">PCR: <strong>—</strong></div></div><div style="text-align:center;background:rgba(255,51,85,0.08);border:1px solid rgba(255,51,85,0.2);border-radius:10px;padding:12px"><div style="font-size:9px;color:#ff3355;font-weight:700;margin-bottom:4px">MAX CALL OI</div><div style="font-size:22px;font-weight:700;font-family:monospace;color:#ff3355">—</div><div style="font-size:10px;color:#7a9cbf;margin-top:4px">Resistance</div></div><div style="text-align:center;background:rgba(0,240,136,0.08);border:1px solid rgba(0,240,136,0.2);border-radius:10px;padding:12px"><div style="font-size:9px;color:#00f088;font-weight:700;margin-bottom:4px">MAX PUT OI</div><div style="font-size:22px;font-weight:700;font-family:monospace;color:#00f088">—</div><div style="font-size:10px;color:#7a9cbf;margin-top:4px">Support</div></div></div></div><div class="card"><div style="font-size:9px;color:#2a3d58;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;margin-bottom:10px">Breaking News</div><div style="font-size:12px;color:#2a3d58;text-align:center;padding:16px">No news</div></div></div><div class="sec">Session Timeline &amp; Morning Brief</div><div class="g2"><div class="card"><div style="font-size:9px;color:#2a3d58;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;margin-bottom:10px">Todays Sessions</div><div style="display:flex;gap:12px;padding:10px 0;border-bottom:1px solid #182236"><div style="width:10px;height:10px;border-radius:50%;background:#ffcc00;margin-top:4px;flex-shrink:0"></div><div style="flex:1"><div style="font-size:9px;color:#2a3d58;font-weight:700">12:13 IST</div><div style="font-size:11px;color:#7a9cbf;margin-top:1px">Mid-Morning 11:15 AM</div><div style="font-size:13px;font-weight:700;margin-top:2px;font-family:monospace;color:#d8eeff">N/A <span style="color:#00f088">+0</span></div></div></div><div style="display:flex;gap:12px;padding:10px 0;border-bottom:1px solid #182236"><div style="width:10px;height:10px;border-radius:50%;background:#ffcc00;margin-top:4px;flex-shrink:0"></div><div style="flex:1"><div style="font-size:9px;color:#2a3d58;font-weight:700">14:52 IST</div><div style="font-size:11px;color:#7a9cbf;margin-top:1px">Post-Lunch 1:15 PM</div><div style="font-size:13px;font-weight:700;margin-top:2px;font-family:monospace;color:#d8eeff">N/A <span style="color:#00f088">+0</span></div></div></div><div style="display:flex;gap:12px;padding:10px 0;border-bottom:1px solid #182236"><div style="width:10px;height:10px;border-radius:50%;background:#ffcc00;margin-top:4px;flex-shrink:0"></div><div style="flex:1"><div style="font-size:9px;color:#2a3d58;font-weight:700">16:03 IST</div><div style="font-size:11px;color:#7a9cbf;margin-top:1px">Pre-Close 3:15 PM</div><div style="font-size:13px;font-weight:700;margin-top:2px;font-family:monospace;color:#d8eeff">N/A <span style="color:#00f088">+0</span></div></div></div><div style="display:flex;gap:12px;padding:10px 0;border-bottom:1px solid #182236"><div style="width:10px;height:10px;border-radius:50%;background:#ffcc00;margin-top:4px;flex-shrink:0"></div><div style="flex:1"><div style="font-size:9px;color:#2a3d58;font-weight:700">09:57 IST</div><div style="font-size:11px;color:#7a9cbf;margin-top:1px">Market Open 9:15 AM</div><div style="font-size:13px;font-weight:700;margin-top:2px;font-family:monospace;color:#d8eeff">N/A <span style="color:#00f088">+0</span></div></div></div></div><div class="card"><div style="font-size:9px;color:#2a3d58;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;margin-bottom:10px">Morning Brief - Gemini AI</div><p style='margin:0;line-height:1.8;color:#8aadc8;font-size:13px'>Morning brief not yet generated.</p></div></div><div style="text-align:center;padding:24px 0 0;font-size:10px;color:#2a3d58">Nifty Live Dashboard - Auto-generated at 09:57 IST - Powered by Gemini AI + Google Search<br><span style="margin-top:4px;display:block">For informational purposes only. Not financial advice.</span></div><script>
(function(){
"use strict";
const YF_QUOTE="https://query1.finance.yahoo.com/v7/finance/quote?symbols=";
const CORS="https://corsproxy.io/?";
function fmt(n,d=2){return n==null?"—":Number(n).toLocaleString("en-IN",{minimumFractionDigits:d,maximumFractionDigits:d});}
function fmtChg(n){if(n==null)return"—";return(n>=0?"+":"")+fmt(n,2);}
function fmtPct(n){if(n==null)return"—";return(n>=0?"+":"")+fmt(n,2)+"%";}
function col(n){return n>0?"#00f088":n<0?"#ff3355":"#7a9cbf";}
function setEl(id,v){const e=document.getElementById(id);if(e)e.textContent=v;}
function setHTML(id,v){const e=document.getElementById(id);if(e)e.innerHTML=v;}
function setC(id,c){const e=document.getElementById(id);if(e)e.style.color=c;}

function stamp(){
  const n=new Date();
  const ist=new Date(n.getTime()+(5.5*3600000)-n.getTimezoneOffset()*60000);
  const p=x=>String(x).padStart(2,"0");
  setEl("live-stamp","Updated "+p(ist.getHours())+":"+p(ist.getMinutes())+":"+p(ist.getSeconds())+" IST");
}

function market(){
  const n=new Date(),ist=new Date(n.getTime()+5.5*3600000);
  const h=ist.getUTCHours(),m=ist.getUTCMinutes(),d=ist.getUTCDay();
  if(d===0||d===6)return false;
  const t=h*60+m;return t>=9*15&&t<=15*30;
}

async function fetch_yf(syms){
  const url=YF_QUOTE+syms+"&fields=regularMarketPrice,regularMarketChange,regularMarketChangePercent,regularMarketDayHigh,regularMarketDayLow,shortName,symbol";
  try{const r=await fetch(url);if(!r.ok)throw 0;const d=await r.json();return d.quoteResponse.result||[];}
  catch(e){
    try{const r=await fetch(CORS+encodeURIComponent(url));const d=await r.json();return d.quoteResponse.result||[];}
    catch(e2){return[];}
  }
}

async function poll(){
  stamp();
  try{
    const qs=await fetch_yf("%5ENSEI,%5ENSEBANK,%5EINDIAVIX");
    if(!qs.length)return;
    const nifty=qs.find(q=>q.symbol.includes("NSEI")&&!q.symbol.includes("BANK"))||qs[0];
    const bank =qs.find(q=>q.symbol.includes("BANK"));
    const vix  =qs.find(q=>q.symbol.includes("INDIAVIX"));
    const c=col(nifty.regularMarketChange);
    setEl("live-price", fmt(nifty.regularMarketPrice,2));
    setEl("live-chg",   fmtChg(nifty.regularMarketChange)+" ("+fmtPct(nifty.regularMarketChangePercent)+")");
    setEl("live-high",  fmt(nifty.regularMarketDayHigh,2));
    setEl("live-low",   fmt(nifty.regularMarketDayLow,2));
    setC("live-price",c); setC("live-chg",c);
    if(vix){
      const vc=vix.regularMarketPrice>16?"#ff3355":vix.regularMarketPrice>12?"#ffcc00":"#00f088";
      setEl("live-vix",fmt(vix.regularMarketPrice,2)); setC("live-vix",vc);
    }
    // ticker strip
    const parts=qs.map(q=>{
      const qc=col(q.regularMarketChange);
      return "<span style='margin-right:20px;white-space:nowrap'>"
        +"<span style='color:#4a6a8a;font-size:9px'>"+( q.shortName||q.symbol)+"</span> "
        +"<span style='color:"+qc+";font-weight:700'>"+fmt(q.regularMarketPrice,2)+"</span>"
        +" <span style='color:"+qc+";font-size:10px'>"+fmtChg(q.regularMarketChange)+" ("+fmtPct(q.regularMarketChangePercent)+")</span>"
        +"</span>";
    });
    setHTML("live-ticker",parts.join("<span style='color:#182236'>|</span>"));
    const b=document.getElementById("live-badge");
    if(b){b.style.display="inline-flex";b.textContent="● LIVE";b.style.color="#00f088";}
  }catch(e){
    const b=document.getElementById("live-badge");
    if(b){b.style.color="#ffcc00";b.textContent="○ Delayed";}
  }
}

function countdown(){
  const sessions=[[8,0,"Morning Brief"],[9,15,"Market Open"],[11,15,"Mid-Morning"],[13,15,"Post-Lunch"],[15,15,"Pre-Close"]];
  const n=new Date(),ist=new Date(n.getTime()+5.5*3600000);
  const h=ist.getUTCHours(),m=ist.getUTCMinutes(),s=ist.getUTCSeconds();
  const cur=h*3600+m*60+s;
  let nxt=null,lbl="";
  for(const[sh,sm,sl]of sessions){const t=sh*3600+sm*60;if(t>cur){nxt=t;lbl=sl;break;}}
  if(!nxt){setEl("next-session","All sessions done for today");return;}
  const d=nxt-cur,rh=Math.floor(d/3600),rm=Math.floor((d%3600)/60),rs=d%60;
  const p=x=>String(x).padStart(2,"0");
  setEl("next-session","Next: "+lbl+" in "+(rh>0?rh+"h ":"")+p(rm)+"m "+p(rs)+"s");
}

// Stale data warning
function checkStale(){
  const genTimeEl = document.getElementById("gen-time");
  if(!genTimeEl) return;
  const genTimeStr = genTimeEl.getAttribute("data-ts");
  if(!genTimeStr) return;
  const genTime = new Date(parseInt(genTimeStr)*1000);
  const ageHours = (Date.now() - genTime.getTime()) / 3600000;
  const bannerEl = document.getElementById("stale-banner");
  if(bannerEl && ageHours > 2){
    bannerEl.style.display = "block";
    bannerEl.innerHTML = "⚠ Dashboard data is " + Math.floor(ageHours) + "h old — last GitHub Actions run may have failed. "
      + "Live price is fetched directly below. "
      + "<a href="https://github.com/Sameerxceed/nifty-morning-brief/actions" target="_blank" "
      + "style="color:#00c8ff">Check Actions log →</a>";
  }
}

window.addEventListener("DOMContentLoaded",function(){
  poll();
  checkStale();
  setInterval(function(){if(market())poll();else stamp();},60000);
  setInterval(countdown,1000);
  countdown();
});
})();
</script></div></body></html>